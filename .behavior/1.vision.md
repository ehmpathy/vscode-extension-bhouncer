# after

```ts
// extension manages ANY language server based on open editors
// configurable list of servers to manage:
const LANGUAGE_SERVERS = [
  { extensions: ['.tf', '.tfvars'], settingKey: 'terraform.languageServer.enable', processPattern: 'terraform-ls' },
  { extensions: ['.yaml', '.yml'], settingKey: 'yaml.enable', processPattern: 'yaml-language-server' },
  { extensions: ['.js', '.ts', '.jsx', '.tsx'], settingKey: 'eslint.enable', processPattern: 'eslintServer' },
  // ... add any language server
];

// when a file is opened:
// 1. capture current PIDs for that server
// 2. enable the server via its setting
// 3. detect new PID that spawned (diff before/after)
// 4. track it for cleanup later

// when last file of that type is closed:
// 1. disable the server via its setting
// 2. kill the tracked PID
// memory freed immediately
```

user experience:
- open .tf file -> terraform-ls starts (~230MB)
- open .yaml file -> yaml-ls starts (~90MB)
- close all .tf files -> terraform-ls stops, memory freed
- close all .yaml files -> yaml-ls stops, memory freed
- stale editors auto-close after M minutes of inactivity
- only last N editors kept open (configurable)
- no manual intervention needed
- works per-window, doesn't affect other windows
- fully configurable: add/remove servers via settings

```ts
// editor pruning settings
{
  "lazyload.editors.maxOpen": 10,           // keep at most N editors
  "lazyload.editors.idleTimeoutMinutes": 10 // close editors idle > M minutes
}
```


# before

```sh
# language servers run forever once workspace opens
# example: 3 windows, each spawns terraform-ls + eslint + yaml-ls + tsserver

ps aux | grep -E "terraform-ls|eslint|yaml-language"
# vlad ... 239MB terraform-ls serve
# vlad ... 234MB terraform-ls serve
# vlad ... 544MB eslintServer.js
# vlad ... 342MB eslintServer.js
# vlad ... 193MB yaml-language-server
# vlad ... 128MB yaml-language-server
# ... adds up to GBs of idle memory

# only way to stop them:
# 1. close the entire VSCodium window
# 2. manually disable each extension
# 3. no "idle timeout" or "no files open" detection
```

problems:
- language servers activate on workspace open if ANY relevant file exists in folder
- stays running even with zero editors of that type open
- no built-in lazy-load or garbage collection
- memory compounds across windows AND across server types

