# usecase.1 = extension initializes without disrupting user workflow

given('user is working in vscode')
  when('user has terminal tab active in bottom panel')
    then('terminal tab remains visible after bhouncer initializes')
      sothat('user can continue typing commands without interruption')
    then('user input focus remains on terminal')
      sothat('keystrokes continue to go to the terminal')

  when('user has problems tab active in bottom panel')
    then('problems tab remains visible after bhouncer initializes')
      sothat('user can continue reviewing diagnostics')

  when('user has debug console active in bottom panel')
    then('debug console remains visible after bhouncer initializes')
      sothat('user can continue debugging session')

  when('user has no bottom panel open')
    then('bottom panel remains closed after bhouncer initializes')
      sothat('user's screen layout is preserved')

given('user is typing in terminal when bhouncer initializes')
  when('bhouncer activation completes')
    then('user's in-progress command is not disrupted')
      sothat('user does not need to refocus or retype')
    then('terminal view is not replaced by output view')
      sothat('user can see their terminal history and prompt')


# usecase.2 = output logging still works for users who want it

given('user wants to see bhouncer logs')
  when('user manually switches to output panel')
    then('bhouncer output channel is available in dropdown')
      sothat('user can select it to view logs')
  when('user selects bhouncer from output dropdown')
    then('bhouncer logs are visible')
      sothat('user can debug or monitor behavior')


# usecase.3 = output can be disabled entirely

given('user has disabled output via settings')
  when('bhouncer initializes')
    then('no output channel is created')
      sothat('output dropdown is not polluted with unused channel')
    then('user workflow is not disrupted')
      sothat('silent operation is maintained')


# boundary.1 = rapid workspace switching

given('user switches between workspaces rapidly')
  when('bhouncer initializes in each workspace')
    then('no workspace switch causes panel focus theft')
      sothat('multi-workspace workflows are smooth')


# boundary.2 = extension reloads

given('user reloads the window or extension')
  when('bhouncer re-initializes')
    then('current panel view is preserved')
      sothat('reload does not disrupt workflow')
